local WhiteL = loadstring(game:HttpGet("https://raw.githubusercontent.com/FLORSACCOUNT/HWID/main/Tatakai%20White%20List"))()
local hwid = game:GetService("RbxAnalyticsService"):GetClientId()
for i,v in pairs(WhiteL) do
if v == hwid then
for i,v in pairs(workspace.Merchants:GetChildren()) do
if v.Name == "QuestMerchant" and v.HumanoidRootPart.CFrame ~= CFrame.new(1548.90002, 263.798401, 2132.40039, 0, 0, 1, 0, 1, -0, -1, 0, 0) then
v:Destroy()
 end
end
getgenv().Tp = true;
getgenv().DupeCompass = true;
getgenv().Webhook = true;
getgenv().GetCompass = false;

local time = os.time()
local Players = game:GetService("Players")
local plr = Players.LocalPlayer

repeat
    task.wait()
until plr.PlayerGui.Load.Frame.Visible


local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")

_G.webhook = "https://discord.com/api/webhooks/1116438897417789461/wI2zi_Rnh00OLpPeyWB8IZ0TX0x07kFT6s00iBEgMRbDH9_PzUnhnsV8y1b36NIRQ43S"
local http = game:GetService("HttpService")
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Main Hub", HidePremium = false, SaveConfig = true, IntroEnabled = false})

local compassinground = 0
function CompassInGround()
	compassinground = 0
	for i,v in pairs(workspace:GetChildren()) do
		if v.Name == "Compass" then
			compassinground += 1
		end
	end
	return compassinground
end
local Comp_ = CompassInGround()

local MaxPing = 300
local MaxPlayers = 15
local function Check()
    local Ping = game:GetService("Stats").Network.ServerStatsItem["Data Ping"]:GetValue()
    local AmountPlayers = #game.Players:GetChildren()

    if AmountPlayers > MaxPlayers then
        return false
    elseif Ping > MaxPing then
        return false
    end
    return true
end

function SendWeebHook()
    local payload = {
        content = "Compass Dupe Infos:",
        embeds = {
            {
                title = "",
                description = "",
                type = "rich",
                color = tonumber(0xffffff),
                fields = {
                    {
                        name = "Compass:",
                        value = workspace["UserData"]["User_".. plr.UserId].Data.CompassTokens.Value,
                        inline = true
                    },
                    {
                        name = "Drop:",
                        value = tostring(CompassInGround() - Comp_),
                        inline = true
                    },
                    {
                        name = "Informations:",
                        value = "Task completed in ".. os.time() - time.. " Seconds" .. "\nJobId: " .. tostring(game.JobId),
                        inline = true
                    },
                    
                },
                image = {
                    url = "https://images-ext-1.discordapp.net/external/PjTNDZXa1RZ-zcR-sTcguhehrRraXv-d6vH-Lc-xKZk/https/tr.rbxcdn.com/905152b500a69aa6fc3d9d14f37e8f76/150/150/Image/Png"
                }
            }
        }
    }

    local s = request({
        Url = _G.webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = http:JSONEncode(payload)
    })
end

local function DupeCompass()
    local compass = {}
    local CompassWeekly = 0
    local compassk = 50
    if workspace.UserData["User_".. plr.UserId].Data.QQ_Weekly3.Value >= 5 and not  workspace.UserData["User_".. plr.UserId].Data.QQQ_Weekly3.Value then
        CompassWeekly = 1
    end
    task.spawn(function()
    repeat task.wait()
        workspace.Merchants.QuestMerchant.Clickable.Retum:FireServer("Claim10")
        workspace:WaitForChild("UserData"):WaitForChild("User_".. game.Players.LocalPlayer.UserId):WaitForChild("ChallengesRemote"):FireServer("Claim","Weekly3")
    until #compass >= compassk
    end)
    repeat task.wait()
        for i,v in pairs(plr.Backpack:GetChildren()) do
            if v.Name == "Compass" then
                v.Parent = plr.Character
                task.wait()
                v.Parent = workspace
                task.wait()
                table.insert(compass,v)
            end
        end
    until #compass >= compassk
    plr:Kick("Rejoining")
    if getgenv().Webhook then
        SendWeebHook()
    end
    TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId)
end

local Tab = Window:MakeTab({
	Name = "Dupe",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

local Section = Tab:AddSection({
	Name = "Compass"
})

Section:AddToggle({
	Name = "Tp",
	Default = getgenv().Tp,
	Callback = function(Value)
		getgenv().Tp = Value
		if Value then
			if plr.PlayerGui.Load.Frame.Visible == true then
				for i,v in pairs(getconnections(game:GetService("Players").LocalPlayer.PlayerGui.Load.Frame.Load.MouseButton1Click)) do
					v:Fire()
				end
			end
            task.wait(2.5)
            if getgenv().Tp then
                plr.Character.HumanoidRootPart.CFrame = CFrame.new(4966,216,5160)
            end
            plr.Backpack.ChildAdded:Connect(function(v)
                if getgenv().DupeCompass and v.Name ~= "ClientParts" then
                    getgenv().DupeCompass = false
for i,v in pairs(workspace:GetChildren()) do
if v.Name == "Compass" then
game.Players.LocalPlayer.Character.Humanoid:EquipTool(v)
end
end
task.wait(3.5)
game.Players.LocalPlayer.Character.Humanoid.Health = 0
task.wait(10)
repeat
    task.wait()
until plr.PlayerGui.Load.Frame.Visible
			if plr.PlayerGui.Load.Frame.Visible == true then
				for i,v in pairs(getconnections(game:GetService("Players").LocalPlayer.PlayerGui.Load.Frame.Load.MouseButton1Click)) do
					v:Fire()
				end
			end
            task.wait(2.5)
                plr.Character.HumanoidRootPart.CFrame = CFrame.new(4966,216,5160)
                     DupeCompass()
                end
			end)
		end
	end    
})

Section:AddToggle({
	Name = "Webhook",
	Default = getgenv().Webhook,
	Callback = function(Value)
        getgenv().Webhook = Value
	end    
})

Section:AddToggle({
	Name = "Dupe compass",
	Default = getgenv().DupeCompass,
	Callback = function(Value)
		getgenv().DupeCompass = Value
	end    
})

Section:AddToggle({
    Name = "Get Compasses",
    Default = getgenv().GetCompass,
    callback = function(v)
        getgenv().GetCompass = v
        if v then
            for i,v in pairs(workspace:GetChildren()) do
                if v.Name == "Compass" then
                    plr.Character.Humanoid:EquipTool(v)
                end
            end
        end
    end
})

workspace.ChildAdded:Connect(function(v)
    if getgenv().GetCompass and v.Name == "Compass" then
        plr.Character.Humanoid:EquipTool(v)
    end
end)

Section:AddButton({
	Name = "Auto Compass",
	Callback = function()
		local posinicial = plr.Character.HumanoidRootPart.Position
		for i,v in pairs(plr.Backpack:GetChildren()) do
			if v.Name == "Compass" then
				local Position = v.Poser.Value
				local split = string.split(tostring(Position), ",")
				plr.Character:MoveTo(Vector3.new(split[1],split[2],split[3]))
				plr.Character.Humanoid:EquipTool(v)
				v:Activate()
				
				task.wait(1)
			end
		end
		plr.Character:MoveTo(posinicial)
	end
})

Section:AddButton({
	Name = "Auto Open Box",
	Callback = function()
		for i,v in pairs(plr.Backpack:GetChildren()) do
			if v:FindFirstChild("BoxServer") then
				plr.Character.Humanoid:EquipTool(v)
				v:Activate()
				task.wait(.5)
			end
		end
	end
})
   end
end
